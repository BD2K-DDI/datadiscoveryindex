<!--

    Copyright (C) 2006-2014 EMBL - European Bioinformatics Institute

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

            http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

-->
<database id="repository-name" parentId="parent-ID" visible="true" order="0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<name>repository-name</name>
	<description>Repository description</description>
	<mainURL>Reposiroty URI</mainURL>
	<summary></summary>  <!-- Check if we need to keep this information, is redundant with summary-->
	<links>
		<fieldLinks>  <!--needed to be modified based on the repositories-->
			<linkGenerator classname="uk.ac.ebi.ebinocle.web.model.linkgenerator.TemplateFieldLinkGenerator">
				<options>
					<option key="template" value="http://www.ebi.ac.uk/repository-name/%{field:id}" />  <!-- check this if we have it in M P E, yes we have -->
					<option key="fieldRef" value="name" />
				</options>
				<name>%{field:name}</name>
				<description>View in the repository website</description>
			</linkGenerator>
		</fieldLinks>
	</links>

	<fields>
		<field id="omics_type" type="text">
			<options>
				<option key="indexing.config.store" value="YES" />
				<option key="indexing.config.index" value="YES" />

				<option key="search.facet.handler.type" value="multivalue" />  <!-- Check what means: the field is multivalued, and the facet can handle it-->
				<option key="search.facet.max.count" value="10" />
				<option key="search.facet.min.hit.count" value="1" />
				<option key="search.facet.multi.select" value="true" />
				<option key="search.facet.label.retriever" value="omics_type" />
				<option key="search.facet.name" value="omics_type" />
				<option key="search.facet.display.order" value="0" />
            </options>
			<name>omics_type</name>
			<description>Omics type is realted with the type of omics this resource is providing, for example (Metabolomics, Proteomics, Genomics)</description>
		</field>
		
		<!-- We have two well defined protocols: Sample Processing and Data Processing, Every resource can create their own 
			 definion but this needs to be added in addition for search pourposes.
		-->
		<field id="sample_protocol" type="text">
			<options>
				<option key="indexing.config.store" value="YES" />
				<option key="indexing.config.index" value="YES" />
			</options>
			<name>sample_protocol</name>
			<description>Sample Processing Protocol</description>
		</field>
		
		<field id="data_protocol" type="text">
			<options>
				<option key="indexing.config.store" value="YES" />
				<option key="indexing.config.index" value="YES" />
			</options>
			<name>data_protocol</name>
			<description>Data Processing Protocol</description>
		</field>
		
		<field id="hosting_repository" type="text">
			<options>
				<option key="indexing.config.store" value="YES" />
				<option key="indexing.config.index" value="YES" />

				<option key="search.facet.handler.type" value="multivalue" />
				<option key="search.facet.max.count" value="10" />
				<option key="search.facet.min.hit.count" value="1" />
				<option key="search.facet.multi.select" value="false" />
				<option key="search.facet.label.retriever" value="hosting_repository" />
				<option key="search.facet.name" value="hosting_repository" />
				<option key="search.facet.display.order" value="1" />
			</options>
			<name>hosting_repository</name>
			<description>The hosting repository is providing the information about Repository for example (PRIDE, EGA, etc)</description>
		</field>
		
		<field id="technology_type" type="text">
			<options>
				<option key="indexing.config.store" value="YES" />
				<option key="indexing.config.index" value="YES" />

				<option key="search.facet.handler.type" value="multivalue" />
				<option key="search.facet.max.count" value="10" />
				<option key="search.facet.min.hit.count" value="1" />
				<option key="search.facet.multi.select" value="false" />
				<option key="search.facet.label.retriever" value="technology_type" />
				<option key="search.facet.name" value="technology_type" />
				<option key="search.facet.display.order" value="3" />
			</options>
			<name>technology_type</name>
			<description>Technology type, provides the information about the Technology in metabolomics could be Mass Spectrometry, 
				NMR spectroscopy, NMR spectroscopy, or can be MRM in proteomics or experiment Type in proteomics</description>
		</field>
		
		<field id="instrument_platform" type="text">
			<options>
				<option key="indexing.config.store" value="YES" />
				<option key="indexing.config.index" value="YES" />

				<option key="search.facet.handler.type" value="multivalue" />
				<option key="search.facet.max.count" value="10" />
				<option key="search.facet.min.hit.count" value="1" />
				<option key="search.facet.multi.select" value="false" />
				<option key="search.facet.label.retriever" value="instrument_platform" />
				<option key="search.facet.name" value="instrument_platform" />
				<option key="search.facet.display.order" value="5" />
			</options>
			<name>instrument_platform</name>
			<description>Instrument Platform is used to classify  the instruments use for example (5975C Series GC/MSD, Orbitrap), etc</description>
		</field>
		
		<field id="tissue" type="text">
			<options>
				<option key="indexing.config.store" value="YES" />
				<option key="indexing.config.index" value="YES" />
				<option key="search.facet.handler.type" value="multivalue" />
				<option key="search.facet.max.count" value="10" />
				<option key="search.facet.min.hit.count" value="1" />
				<option key="search.facet.multi.select" value="false" />
				<option key="search.facet.label.retriever" value="tissue" />
				<option key="search.facet.name" value="tissue" />
				<option key="search.facet.display.order" value="6" />
			</options>
			<name>tissue</name>
			<description>Tissue will be use to describe the tissue used in the experiment and is really useful in PRIDE experiments</description>
		</field>
		
		<field id="disease" type="text">
			<options>
				<option key="indexing.config.store" value="YES" />
				<option key="indexing.config.index" value="YES" />
				<option key="search.facet.handler.type" value="multivalue" />
				<option key="search.facet.max.count" value="10" />
				<option key="search.facet.min.hit.count" value="1" />
				<option key="search.facet.multi.select" value="false" />
				<option key="search.facet.label.retriever" value="disease" />
				<option key="search.facet.name" value="disease" />
				<option key="search.facet.display.order" value="7" />
			</options>
			<name>disease</name>
			<description>Disease will be use to describe the dieasse used in the experiment and is really useful in PRIDE experiments</description>
		</field>
		
		<field id="project_submitter" type="text">
			<options>
				<option key="indexing.config.store" value="YES" />
				<option key="indexing.config.index" value="YES" />
			</options>
			<name>project_submitter</name>
			<description>Project submiter could be the name of the submitter or lab head, it can be one or more entries</description>
		</field>
		
		<field id="submitter_keywords" type="text">
			<options>
				<option key="indexing.config.store" value="YES" />
				<option key="indexing.config.index" value="YES" />
			</options>
			<name>submitter_keywords</name>
			<description>Keywords provider by the submmiter or the original resource</description>
		</field>
		
		<field id="curator_keyword" type="text">
			<options>
				<option key="indexing.config.store" value="YES" />
				<option key="indexing.config.index" value="YES" />
			</options>
			<name>curator_keyword</name>
			<description>Keywords provider by the curators</description>
		</field>
		
		<field id="publication" type="text">
			<options>
				<option key="indexing.config.store" value="YES" />
				<option key="indexing.config.index" value="YES" />
			</options>
			<name>publication</name>
			<description>Publication</description>
		</field>
		
		<field id="full_dataset_link" type="text">
			<options>
				<option key="indexing.config.store" value="YES" />
				<option key="indexing.config.index" value="YES" />
			</options>
			<name>full_dataset_link</name>
			<description>The original link of the dataset in the resource</description>
		</field>
		
		<field id="dataset_file" type="text">
			<options>
				<option key="indexing.config.store" value="YES" />
				<option key="indexing.config.index" value="NO" />
			</options>
			<name>dataset_file</name>
			<description>Some dataset links for example to the actual files in the dataset</description>
		</field>
		
		<field id="modification" type="text">
			<options>
				<option key="indexing.config.store" value="YES" />
				<option key="indexing.config.index" value="YES" />

				<option key="search.facet.handler.type" value="multivalue" />  
				<option key="search.facet.max.count" value="10" />
				<option key="search.facet.min.hit.count" value="1" />
				<option key="search.facet.multi.select" value="false" />
				<option key="search.facet.label.retriever" value="modification" />
				<option key="search.facet.name" value="modification" />
				<option key="search.facet.display.order" value="0" />
			</options>
			<name>modification</name>
			<description>Modification (This field is only for proteomics studies)</description>
		</field>
		
		<field id="study_design" type="text">
			<options>
				<option key="indexing.config.store" value="YES" />
				<option key="indexing.config.index" value="YES" />
			</options>
			<name>study_design</name>
			<description>This is used in Metaboligths and ISATAB with ontolgies</description>

		</field>
		
		<field id="study_factor" type="text">
			<options>
				<option key="indexing.config.store" value="YES" />
				<option key="indexing.config.index" value="YES" />
			</options>
			<name>study_factor</name>
			<description>Used in ISATab and other resources to catalog the experimental factors involved</description>
		</field>
		
		<!-- The study status-->
		<field id="study_status" type="text">    
			<options>
				<option key="indexing.config.store" value="YES" />
				<option key="indexing.config.index" value="YES" />
			</options>
			<name>study_status</name>
			<description>Study_status (This field is only for Metabolomics studies) but it can be also included in Proteomics and other fields </description>
		</field>
		
		<!-- Cross references to the most important multi-omics we will support at the very begining -->
		<field id="CHEBI" type="xref">
			<options>
				<option key="config.xref.domain.field" value="acc" />
				<option key="config.xref.domain" value="chebi" />
			</options>
			<name>CHEBI</name>
			<description>Chebi accession (This field is only for Metabolomics studies)</description>
		</field>
		
		<field id="UNIPROT" type="xref">
			<options>
				<option key="config.xref.domain.field" value="acc" />
				<option key="config.xref.domain" value="uniprot" />
			</options>
			<name>UNIPROT</name>
			<description>UNIPROT accession (This field is only for studies based on UNIPROT such as Proteomics)</description>
		</field>
		
		<field id="ENSEMBL" type="xref">
			<options>
				<option key="config.xref.domain.field" value="acc" />
				<option key="config.xref.domain" value="ensembl" />
			</options>
			<name>ENSEMBL</name>
			<description>ENSEMBL accession (This field is only for studies based on ENSEMBL such as Proteomics)</description>
		</field>
		
		<field id="PUB_MED" type="xref">
			<options>
				<option key="config.xref.domain.field" value="id" />
				<option key="config.xref.domain" value="medline" />
			</options>
			<name>PUB_MED</name>
			<description>MEDLINE reference</description>
		</field>
		
		<field id="TAXONOMY" type="xref">
			<options>
				<option key="config.xref.domain.field" value="id" />
                		<option key="config.xref.domain" value="taxonomy" />
				<option key="search.facet.handler.type" value="multivalue" />
				<option key="search.facet.max.count" value="10" />
				<option key="search.facet.min.hit.count" value="1" />
				<option key="search.facet.multi.select" value="true" />
				<option key="search.facet.label.retriever" value="taxonomy" />
				<option key="search.facet.name" value="taxonomy" />
				<option key="search.facet.display.order" value="0" />
			</options>
			<name>TAXONOMY</name>
			<description>References to the Organism taxonomy</description>
		</field>
		
	</fields>

	<dataUpdate>
		<script type="groovy"
			location="${ebinocle-config.updateScripts}${fs}ddi.groovy" />
		<footprint>${ebinocle.dataRootDir}${fs}ddi${fs}latest${fs}footprint_ddi.properties</footprint>
		<metadata>${ebinocle.dataRootDir}${fs}ddi${fs}latest${fs}metadata_ddi.properties</metadata>
	</dataUpdate>

	<index>
		<sources>
			<source>
				<path>${ebinocle.dataRootDir}${fs}ddi${fs}latest</path>
				<filePattern>eb-eye_ddi\.xml</filePattern>
				<excludeFolderPattern>.*</excludeFolderPattern>
			</source>
		</sources>
		<splitter>
			<options>
				<option key="granularity" value="file" />
				<option key="splittedParts" value="1" />
				<option key="headerEndString" value="&lt;entries&gt;" />
				<option key="footerStartString" value="&lt;/entries&gt;" />
				<option key="entryStartString" value="&lt;entry " />
				<option key="entryEndString" value="&lt;/entry&gt;" />
				<option key="entryStartFirstOnLine" value="false" />
			</options>
		</splitter>
		<indexer>
			<options>
				<option key="indexing.parser.path" value="${ebinocle-config.parsers}${fs}xmldump.antxr" />
			</options>
		</indexer>
	</index>
	
</database>
